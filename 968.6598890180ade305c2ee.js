"use strict";(self.webpackChunkzezinho=self.webpackChunkzezinho||[]).push([[968],{2968:(ue,h,i)=>{i.r(h),i.d(h,{ProductsModule:()=>se});var a=i(8583),C=i(6868),p=i(5050),x=i(8002),e=i(639),y=i(5565),_=i(6571);let A=(()=>{class t extends y.AE{constructor(){super(...arguments),this.document=_.ZP`
    query poc($id: ID!, $categoryId: Int, $search: String) {
      poc(id: $id) {
        id
        products(categoryId: $categoryId, search: $search) {
          id
          title
          images {
            url
          }
          productVariants {
            price
          }
        }
      }
    }
  `}}return t.\u0275fac=function(){let o;return function(r){return(o||(o=e.n5z(t)))(r||t)}}(),t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),w=(()=>{class t extends y.AE{constructor(){super(...arguments),this.document=_.ZP`
    query allCategoriesSearch {
      allCategory {
        title
        id
      }
    }
  `}}return t.\u0275fac=function(){let o;return function(r){return(o||(o=e.n5z(t)))(r||t)}}(),t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var v=i(8345),I=i(7709),Q=i(5319),J=i(1635),L=i(7519);let F=(()=>{class t{constructor(){this.search=new e.vpe,this.searchDebouncer=new I.xQ,this.subscriptions=new Q.w}ngOnInit(){this.subscriptions.add(this.searchDebouncer.pipe((0,J.b)(500)).pipe((0,L.x)()).subscribe(n=>{this.search.emit(n)}))}ngOnDestroy(){this.subscriptions.unsubscribe()}onSearch(n){this.searchDebouncer.next(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-products-search"]],outputs:{search:"search"},decls:3,vars:0,consts:[[1,"search"],["type","text","placeholder","Pesquise seu produto",3,"input"],["search",""]],template:function(n,r){if(1&n){const c=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"input",1,2),e.NdJ("input",function(){e.CHM(c);const g=e.MAs(2);return r.onSearch(g.value)}),e.qZA(),e.qZA()}},styles:[".search[_ngcontent-%COMP%]{box-shadow:0 0 10px #0000001a;height:50px;display:flex;align-items:center;border-radius:4px;background-color:#fff}.search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:100%;border:none;font-size:18px;padding-left:12px;border-radius:4px}.search[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:45px;font-size:20px;cursor:pointer;text-align:center;color:#aaa}.search[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]:hover{color:#333}"]}),t})();const u="undefined"!=typeof performance&&void 0!==performance.now&&"function"==typeof performance.mark&&"function"==typeof performance.measure&&("function"==typeof performance.clearMarks||"function"==typeof performance.clearMeasures),z="undefined"!=typeof PerformanceObserver&&void 0!==PerformanceObserver.prototype&&"function"==typeof PerformanceObserver.prototype.constructor,f="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0);let l={},d={};const m=()=>u?performance.now():Date.now(),P=t=>{l[t]=void 0,d[t]&&(d[t]=void 0),u&&(f||performance.clearMeasures(t),performance.clearMarks(t))},O=t=>{if(u){if(f&&z){const o=new PerformanceObserver(n=>{d[t]=n.getEntries().find(r=>r.name===t),o.disconnect()});o.observe({entryTypes:["measure"]})}performance.mark(t)}l[t]=m()},M=(t,o)=>{try{const n=l[t];return u?(o||performance.mark(`${t}-end`),performance.measure(t,t,o||`${t}-end`),f?d[t]?d[t]:n?{duration:m()-n,startTime:n,entryType:"measure",name:t}:{}:performance.getEntriesByName(t).pop()||{}):n?{duration:m()-n,startTime:n,entryType:"measure",name:t}:{}}catch(n){return{}}finally{P(t),P(o||`${t}-end`)}},D=function(t,o,n,r){return{circle:t,progress:o,"progress-dark":n,pulse:r}};function N(t,o){if(1&t&&e._UZ(0,"span",1),2&t){const n=e.oxw();e.Q6J("ngClass",e.l5B(4,D,"circle"===n.appearance,"progress"===n.animation,"progress-dark"===n.animation,"pulse"===n.animation))("ngStyle",n.theme),e.uIk("aria-label",n.ariaLabel)("aria-valuetext",n.loadingText)}}const b=new e.OlP("ngx-skeleton-loader.config");let S=(()=>{class t{constructor(n){const{appearance:r="line",animation:c="progress",theme:s=null,loadingText:g="Loading...",count:de=1,ariaLabel:pe="loading"}=n||{};this.appearance=r,this.animation=c,this.theme=s,this.loadingText=g,this.count=de,this.items=[],this.ariaLabel=pe}ngOnInit(){O("NgxSkeletonLoader:Rendered"),O("NgxSkeletonLoader:Loaded"),this.validateInputValues()}validateInputValues(){/^\d+$/.test(`${this.count}`)||((0,e.X6Q)()&&console.error("`NgxSkeletonLoaderComponent` need to receive 'count' a numeric value. Forcing default to \"1\"."),this.count=1),this.items.length=this.count;const n=["progress","progress-dark","pulse","false"];-1===n.indexOf(String(this.animation))&&((0,e.X6Q)()&&console.error(`\`NgxSkeletonLoaderComponent\` need to receive 'animation' as: ${n.join(", ")}. Forcing default to "progress".`),this.animation="progress"),-1===["circle","line",""].indexOf(String(this.appearance))&&((0,e.X6Q)()&&console.error("`NgxSkeletonLoaderComponent` need to receive 'appearance' as: circle or line or empty string. Forcing default to \"''\"."),this.appearance="")}ngOnChanges(n){["count","animation","appearance"].find(r=>n[r]&&(n[r].isFirstChange()||n[r].previousValue===n[r].currentValue))||this.validateInputValues()}ngAfterViewInit(){M("NgxSkeletonLoader:Rendered")}ngOnDestroy(){M("NgxSkeletonLoader:Loaded")}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(b,8))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ngx-skeleton-loader"]],inputs:{appearance:"appearance",animation:"animation",theme:"theme",loadingText:"loadingText",count:"count",ariaLabel:"ariaLabel"},features:[e.TTD],decls:1,vars:1,consts:[["class","loader","aria-busy","true","aria-valuemin","0","aria-valuemax","100","role","progressbar","tabindex","0",3,"ngClass","ngStyle",4,"ngFor","ngForOf"],["aria-busy","true","aria-valuemin","0","aria-valuemax","100","role","progressbar","tabindex","0",1,"loader",3,"ngClass","ngStyle"]],template:function(n,r){1&n&&e.YNc(0,N,1,9,"span",0),2&n&&e.Q6J("ngForOf",r.items)},directives:[a.sg,a.mk,a.PC],styles:['.loader[_ngcontent-%COMP%]{background:#eff1f6 no-repeat;border-radius:4px;box-sizing:border-box;display:inline-block;height:20px;margin-bottom:10px;overflow:hidden;position:relative;width:100%;will-change:transform}.loader[_ngcontent-%COMP%]:after, .loader[_ngcontent-%COMP%]:before{box-sizing:border-box}.loader.circle[_ngcontent-%COMP%]{border-radius:50%;height:40px;margin:5px;width:40px}.loader.progress[_ngcontent-%COMP%], .loader.progress-dark[_ngcontent-%COMP%]{transform:translateZ(0)}.loader.progress-dark[_ngcontent-%COMP%]:after, .loader.progress-dark[_ngcontent-%COMP%]:before, .loader.progress[_ngcontent-%COMP%]:after, .loader.progress[_ngcontent-%COMP%]:before{box-sizing:border-box}.loader.progress-dark[_ngcontent-%COMP%]:before, .loader.progress[_ngcontent-%COMP%]:before{-webkit-animation:progress 2s ease-in-out infinite;animation:progress 2s ease-in-out infinite;background-size:200px 100%;content:"";height:100%;left:0;position:absolute;top:0;width:200px;z-index:1}.loader.progress[_ngcontent-%COMP%]:before{background-image:linear-gradient(90deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.6),hsla(0,0%,100%,0))}.loader.progress-dark[_ngcontent-%COMP%]:before{background-image:linear-gradient(90deg,transparent,rgba(0,0,0,.2),transparent)}.loader.pulse[_ngcontent-%COMP%]{-webkit-animation:pulse 1.5s cubic-bezier(.4,0,.2,1) infinite;-webkit-animation-delay:.5s;animation:pulse 1.5s cubic-bezier(.4,0,.2,1) infinite;animation-delay:.5s}@media (prefers-reduced-motion:reduce){.loader.progress[_ngcontent-%COMP%], .loader.progress-dark[_ngcontent-%COMP%], .loader.pulse[_ngcontent-%COMP%]{-webkit-animation:none;animation:none}.loader.progress[_ngcontent-%COMP%], .loader.progress-dark[_ngcontent-%COMP%]{background-image:none}}@-webkit-keyframes progress{0%{transform:translate3d(-200px,0,0)}to{transform:translate3d(calc(200px + 100vw),0,0)}}@keyframes progress{0%{transform:translate3d(-200px,0,0)}to{transform:translate3d(calc(200px + 100vw),0,0)}}@-webkit-keyframes pulse{0%{opacity:1}50%{opacity:.4}to{opacity:1}}@keyframes pulse{0%{opacity:1}50%{opacity:.4}to{opacity:1}}'],changeDetection:0}),t})(),T=(()=>{class t{static forRoot(n){return{ngModule:t,providers:[{provide:b,useValue:n}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[a.ez]]}),t})();const U=function(){return{margin:"-5px"}};function E(t,o){1&t&&e._UZ(0,"ngx-skeleton-loader",2),2&t&&e.Q6J("theme",e.DdM(1,U))}let q=(()=>{class t{constructor(){this.category=null,this.active=!1}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-category"]],inputs:{category:"category",active:"active"},decls:4,vars:4,consts:[[1,"category"],[3,"theme",4,"ngIf"],[3,"theme"]],template:function(n,r){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"span"),e._uU(2),e.qZA(),e.YNc(3,E,1,2,"ngx-skeleton-loader",1),e.qZA()),2&n&&(e.ekj("active",r.active),e.xp6(2),e.Oqu(null==r.category?null:r.category.title),e.xp6(1),e.Q6J("ngIf",!r.category))},directives:[a.O5,S],styles:[".category[_ngcontent-%COMP%]{box-shadow:0 0 10px #0000001a;background-color:#fff;border-radius:4px;text-align:center;padding:15px 10px;cursor:pointer}.category[_ngcontent-%COMP%]:hover{color:#cda500}.category.active[_ngcontent-%COMP%]{background-color:#ffcd01}.category.active[_ngcontent-%COMP%]:hover{color:#666}"]}),t})();const Y=function(t,o){return{"mdi-cart-plus":t,"mdi-cart-remove active":o}};function $(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e._UZ(2,"img",3),e.qZA(),e.TgZ(3,"div",4),e.TgZ(4,"span"),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"div",5),e.TgZ(7,"span",6),e._uU(8),e.ALo(9,"currency"),e.qZA(),e.TgZ(10,"span",7),e.NdJ("click",function(){e.CHM(n);const c=e.oxw();return c.onCheckout(c.product)}),e.qZA(),e.qZA(),e.qZA()}if(2&t){const n=e.oxw();e.xp6(2),e.Q6J("src",n.product.images[0].url,e.LSH),e.xp6(3),e.hij(" ",n.product.title," "),e.xp6(3),e.Oqu(e.lcZ(9,4,n.product.productVariants[0].price)),e.xp6(2),e.Q6J("ngClass",e.WLB(6,Y,!n.isAtCheckout,n.isAtCheckout))}}const j=function(){return{width:"100px",height:"100px"}};function B(t,o){1&t&&(e.TgZ(0,"div",1),e.TgZ(1,"div",2),e._UZ(2,"ngx-skeleton-loader",8),e.qZA(),e.TgZ(3,"div",4),e._UZ(4,"ngx-skeleton-loader"),e.qZA(),e._UZ(5,"ngx-skeleton-loader"),e.qZA()),2&t&&(e.xp6(2),e.Q6J("theme",e.DdM(1,j)))}let R=(()=>{class t{constructor(n){this.localStorageService=n,this.product=null}get isAtCheckout(){return!!this.product&&-1!==this.findIndexItemOnCheckout(this.product)}onCheckout(n){let r=this.localStorageService.getItemAsJSON(p.Q.CHECKOUT);if(r){const c=r.findIndex(s=>s.id===n.id);-1!==c?r.splice(c,1):r.push(n)}else r=[n];this.localStorageService.setItem(p.Q.CHECKOUT,r)}findIndexItemOnCheckout(n){let r=this.localStorageService.getItemAsJSON(p.Q.CHECKOUT);return r?r.findIndex(c=>c.id===n.id):-1}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(v.n))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-product-card"]],inputs:{product:"product"},decls:2,vars:2,consts:[["class","product",4,"ngIf"],[1,"product"],[1,"product-header"],["alt","Product Image",3,"src"],[1,"product-content"],[1,"product-footer"],[1,"price"],[1,"mdi","cart",3,"ngClass","click"],[3,"theme"]],template:function(n,r){1&n&&(e.YNc(0,$,11,9,"div",0),e.YNc(1,B,6,2,"div",0)),2&n&&(e.Q6J("ngIf",r.product),e.xp6(1),e.Q6J("ngIf",!r.product))},directives:[a.O5,a.mk,S],pipes:[a.H9],styles:[".product[_ngcontent-%COMP%]{box-shadow:0 0 10px #0000001a;background-color:#fff;border-radius:4px;padding:10px}.product-header[_ngcontent-%COMP%]{width:100%;height:150px;padding:10px;display:flex;align-items:center;justify-content:center}.product-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100px}.product-content[_ngcontent-%COMP%]{height:50px}.product-content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:-webkit-box;overflow:hidden;text-overflow:ellipsis;-webkit-line-clamp:2;-webkit-box-orient:vertical}.product-footer[_ngcontent-%COMP%]{font-weight:bold;display:flex;align-items:center;justify-content:space-between}.product-footer[_ngcontent-%COMP%]   .cart[_ngcontent-%COMP%]{font-size:30px;cursor:pointer;color:#595959}.product-footer[_ngcontent-%COMP%]   .cart[_ngcontent-%COMP%]:hover{color:#cda500}.product-footer[_ngcontent-%COMP%]   .cart.active[_ngcontent-%COMP%]{color:#e7b900}"]}),t})();function V(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"app-category",10),e.NdJ("click",function(){const s=e.CHM(n).$implicit;return e.oxw(2).onClickCategory(s)}),e.qZA(),e.qZA()}if(2&t){const n=o.$implicit,r=e.oxw(2);e.xp6(1),e.Q6J("active",n.id===(null==r.currentCategory?null:r.currentCategory.id))("category",n)}}function X(t,o){if(1&t&&(e.TgZ(0,"div",7),e.YNc(1,V,2,2,"div",8),e.qZA()),2&t){const n=o.ngIf;e.xp6(1),e.Q6J("ngForOf",n)}}function H(t,o){if(1&t&&(e.TgZ(0,"div",14),e._UZ(1,"app-product-card",15),e.qZA()),2&t){const n=o.$implicit;e.xp6(1),e.Q6J("product",n)}}function K(t,o){1&t&&(e.TgZ(0,"div",16),e._UZ(1,"span",17),e.TgZ(2,"span"),e._uU(3,"Sem produtos por aqui"),e.qZA(),e.qZA())}function W(t,o){if(1&t&&(e.TgZ(0,"div",11),e.YNc(1,H,2,1,"div",12),e.YNc(2,K,4,0,"div",13),e.qZA()),2&t){const n=o.ngIf;e.ekj("no-products",!n.length),e.xp6(1),e.Q6J("ngForOf",n),e.xp6(1),e.Q6J("ngIf",!n.length)}}function G(t,o){1&t&&(e.TgZ(0,"div",9),e._UZ(1,"app-category"),e.qZA())}const Z=function(){return[1,2,3,4,5,6]};function ee(t,o){1&t&&(e.TgZ(0,"div",7),e.YNc(1,G,2,0,"div",8),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",e.DdM(1,Z)))}function te(t,o){1&t&&(e.TgZ(0,"div",14),e._UZ(1,"app-product-card"),e.qZA())}function ne(t,o){1&t&&(e.TgZ(0,"div",11),e.YNc(1,te,2,0,"div",12),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",e.DdM(1,Z)))}let k=(()=>{class t{constructor(n,r,c){this.productsQuery=n,this.categoriesQuery=r,this.localStorageService=c,this.search=null,this.userData=null,this.category=null,this.products$=null,this.categories$=null}get currentCategory(){return this.category}ngOnInit(){const n=this.localStorageService.getItemAsJSON(p.Q.USER_DATA);this.userData=n,this.loadProducts(),this.loadCategories()}onSearch(n){this.search=n,this.loadProducts()}onClickCategory(n){this.category=this.category&&this.category.id===n.id?null:n,this.loadProducts()}loadCategories(){if(!this.userData)return;const n={algorithm:"NEAREST",lat:String(this.userData.latitude),long:String(this.userData.longitude),now:(new Date).toISOString()};this.categories$=this.categoriesQuery.watch(n).valueChanges.pipe((0,x.U)(r=>r.data.allCategory))}loadProducts(){if(!this.userData)return;const n={id:this.userData.id};this.search&&(n.search=this.search),this.category&&(n.categoryId=this.category.id),this.products$=this.productsQuery.watch(n).valueChanges.pipe((0,x.U)(r=>r.data.poc.products))}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(A),e.Y36(w),e.Y36(v.n))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-products"]],decls:11,vars:8,consts:[[1,"page-content"],[1,"search"],[3,"search"],["class","categories",4,"ngIf","ngIfElse"],["class","products",3,"no-products",4,"ngIf","ngIfElse"],["categoriesLoadingTemplate",""],["productsLoadingTemplate",""],[1,"categories"],["class","categories-item",4,"ngFor","ngForOf"],[1,"categories-item"],[3,"active","category","click"],[1,"products"],["class","products-item",4,"ngFor","ngForOf"],["class","no-products-content",4,"ngIf"],[1,"products-item"],[3,"product"],[1,"no-products-content"],[1,"mdi","mdi-cart-outline","icon"]],template:function(n,r){if(1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"app-products-search",2),e.NdJ("search",function(s){return r.onSearch(s)}),e.qZA(),e.qZA(),e.YNc(3,X,2,1,"div",3),e.ALo(4,"async"),e.YNc(5,W,3,4,"div",4),e.ALo(6,"async"),e.qZA(),e.YNc(7,ee,2,2,"ng-template",null,5,e.W1O),e.YNc(9,ne,2,2,"ng-template",null,6,e.W1O)),2&n){const c=e.MAs(8),s=e.MAs(10);e.xp6(3),e.Q6J("ngIf",e.lcZ(4,4,r.categories$))("ngIfElse",c),e.xp6(2),e.Q6J("ngIf",e.lcZ(6,6,r.products$))("ngIfElse",s)}},directives:[F,a.O5,a.sg,q,R],pipes:[a.Ov],styles:[".page-content[_ngcontent-%COMP%]{max-width:1360px;margin:auto;padding:20px 0}.page-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{padding:0 20px}.page-content[_ngcontent-%COMP%]   .categories[_ngcontent-%COMP%], .page-content[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]{padding:20px;display:grid;grid-row-gap:16px;grid-column-gap:16px;grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}.page-content[_ngcontent-%COMP%]   .no-products[_ngcontent-%COMP%]{display:flex}.page-content[_ngcontent-%COMP%]   .no-products-content[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;flex-direction:column;justify-content:center;text-align:center;margin:20px 0;font-size:30px;color:#595959}.page-content[_ngcontent-%COMP%]   .no-products-content[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:80px;margin-bottom:20px}"]}),t})();const oe=[{path:"",component:k},{path:":id",component:k}];let re=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[C.Bz.forChild(oe)],C.Bz]}),t})(),ce=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[a.ez,T]]}),t})(),ae=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[a.ez,T]]}),t})(),ie=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[a.ez]]}),t})(),se=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[a.ez,re,ce,ae,ie]]}),t})()}}]);